!!! note "Примечание"
    Пример обработки события `ПриИзменении`.

## Описание примера

Расширение исправляет ошибку Конфигурации в документе "Поступление товаров", где в табличной части не пересчитывается сумма при изменении цены или количества. Форма документа не заимствуется.

## Состав Расширения

### Объекты

![Screenshot](../../img/%D0%9F%D0%B5%D1%80%D0%B5%D1%81%D1%87%D0%B5%D1%82%20%D1%81%D1%83%D0%BC%D0%BC%D1%8B%20%D0%B2%20%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%B5.png)

!!! note "Примечание"
    Ниже приведены полные тексты модулей Расширения. Код, связанный с обработкой событий, выделен отдельным цветом.

### Модуль менеджера обработки

``` bsl hl_lines="16 28-41" linenums="1"
#Область СлужебныйПрограммныйИнтерфейс

#Область ЕХТ

Функция ПолноеИмя() Экспорт
	Возврат Создать().Метаданные().ПолноеИмя();
КонецФункции

Функция Идентификатор() Экспорт
	Возврат "9bea308a-4581-4767-99ed-92e99416d8ba";
КонецФункции

Функция Сведения(Сведения) Экспорт
	
	Сведения.Версия	= "17.09.09.1";
	Сведения.Подписки = Истина;
	
	Возврат Истина;
	
КонецФункции	

Функция ОбработкаОбновления(ТекущаяВерсия, НоваяВерсия, НастройкиОбъекта) Экспорт 
	Возврат Истина;
КонецФункции

#КонецОбласти

Функция Подписки(Подписки) Экспорт
	
	Подписка = Подписки.Добавить();
	Подписка.Событие 	= "ПослеПриИзменении";
	Подписка.Издатель 	= "Документ.ПоступлениеТоваров.Форма.ФормаДокумента";
	// Обработка событий двух элементов.
	Подписка.Элемент 	= "ТоварыЦена, ТоварыКоличество";
	// Вместо стандартного обработчика ЕХТ_ПослеПриИзменении() вызывается ПерерасчетСуммы().
	Подписка.Обработчик	= "ПерерасчетСуммы"; 				
	Подписка.Описание	= "Перерасчет суммы при изменении цены или количества.";
	
	Возврат Истина;
	
КонецФункции		

#КонецОбласти
```

### Модуль формы Подписки

``` bsl hl_lines="16 1-7" linenums="1"
&НаКлиенте
Функция ПерерасчетСуммы(Элемент, СвойстваСобытия) Экспорт
	
	ТекущаяСтрока = Элемент.Родитель.ТекущиеДанные;
	ТекущаяСтрока.Сумма = Окр(ТекущаяСтрока.Цена * ТекущаяСтрока.Количество, 2, 1);
	
КонецФункции	
```